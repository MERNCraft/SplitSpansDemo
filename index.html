<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Split Spans Demo</title>
  <style>
    p,
    pre {
      /* max-width:25em; */
      margin: 0 auto;
      padding: 1em;
      white-space: pre-wrap;
      color: #ddd;
      background-color: #222;
      border: 1em solid transparent;
    }
    span[lang=sp] {
      background-color: #660;
      &::before {
        content: "ğŸ‡ªğŸ‡¸ ";
      }
    }
    span[lang=fr] {
      background-color: #006;
      &::before {
        content: "ğŸ‡«ğŸ‡· ";
      }
    }
    span[lang=th] {
      background-color: #300;
      &::before {
        content: "ğŸ‡¹ğŸ‡­ ";
      }
    }
    span.pre {
      font-family: monospace;
      white-space: pre;
    }
  </style>
</head>
<body>
<p >This tutorial shows you how to <b>build a tool for selecting text</b>, and how to <b>wrap the selected text in a span</b> of its own.

You can test this tool right here. <i>Click and drag on this text to make a selection, then press Enter to create a new span</i>.

You'll notice that <u>your selection snaps to start and end with <i>whole words</i></u>, and that the <u><i>punctuation</i> around the start and end words is <i>included in the selection</i></u>.

The techniques used here could be useful if you are building a <b>note taking app</b>, a <b>collaborative writing environment</b> like Google Docs, a <b>language-learning app</b>, an <b>accessibility tool for assisted reading</b>, or something similar.

Browsers have made text selection seem simple for end users, but for you, the developer, formatting tags, nested spans, whitespace rules, and browser inconsistencies make it surprisingly complex.

Here are some of the expectations that your end-users may have:

They might want to make a selection that would merge existing spans or split formatting tags.

Sometimes separate blocks need to be kept together. For example, blocks like 37.2Â° C, 60 km/h, January&nbsp;1&nbsp;2000, J.R.R.&nbsp;Tolkein and  Â£11&nbsp;million only make sense when all the pieces are kept together. Try it: if you only select the "C" of "37.2Â° C", for instance, the whole chunk will be selected automatically.

Different browsers treat text selection in different ways (looking at you Safari!) and this tutorial show you how to these differences and other quirks.

Different languages have different punctuation rules. Spanish has inverted punctuation, <span lang="sp">Por ejemplo: "Â¡Hola! Â¿QuÃ© tan bueno es tu espaÃ±ol?"</span>. French requires spaces between some punctuation characters and the words that they are associated with. <span lang="fr">Par exempleÂ : Â«â€‰Quoi quâ€™a ditâ€‰?â€‰Â» (tirÃ© du poÃ¨me Â«â€‰La mÃ´me nÃ©antâ€‰Â» de Jean Tardieu).</span> And some languages have no gaps between words at all: <span lang="th">à¸™à¸µà¹ˆà¸„à¸·à¸­à¸›à¸£à¸°à¹‚à¸¢à¸„à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸™à¸µà¹‰à¹à¸ªà¸”à¸‡à¸ˆà¸¸à¸”à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸‚à¸­à¸‡à¸›à¸£à¸°à¹‚à¸¢à¸„à¹ƒà¸«à¸¡à¹ˆ</span>

You'll see how to work with DOM elements and nodes, with Selection and Range objects, with Regular Expressions, and with the TreeWalker and Intl.Segmenter APIs. And you will learn to appreciate <span class="pre">{ white-space: pre-wrap; }</span>.

Play with this demo for a while, and then read on to discover all the concepts that you will be mastering as you build your own version of this tool.</p>
</body>
</html>